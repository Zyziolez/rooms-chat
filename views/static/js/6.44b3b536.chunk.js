(this.webpackJsonprooms=this.webpackJsonprooms||[]).push([[6],{100:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var c=n(2),o=n(0),i=n(24),r=n.n(i),s=n(1),a=function(e){var t=e.isOpen,n=(e.onClose,e.children);e.enabled;return t?r.a.createPortal(Object(s.jsx)("div",{style:{height:"100vh",background:"rgba(20, 20, 20, 0.677)",width:"100vw",position:"fixed",top:"0"},children:n}),document.body):null};function u(e){var t=e.open,n=(e.setOpen,e.text),i=Object(o.useState)(!0),r=Object(c.a)(i,2),u=r[0],l=r[1];return Object(o.useEffect)((function(){setTimeout((function(){l(!1)}),2e3)}),[]),Object(s.jsx)("div",{children:Object(s.jsx)(a,{isOpen:t,enabled:u,children:Object(s.jsx)("div",{style:{width:"25rem",background:"white",position:"absolute",height:"30rem",marginTop:"20vh",marginLeft:"50%",transform:"translateX(-50%)",textAlign:"center",padding:"2rem"},children:Object(s.jsxs)("h1",{children:[n," "]})})})})}},102:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));var c=n(0),o=n(1);function i(e){var t=e.chat,n=t.slice(0),i=Object(c.useRef)();return Object(c.useEffect)((function(){i.current.scrollIntoView({behavior:"smooth",block:"start"})}),[t]),Object(o.jsx)("div",{className:"chat-list",children:Object(o.jsxs)("ul",{style:{overflow:"hidden"},children:[n.length>0?n.map((function(e,t){return Object(o.jsxs)("li",{children:[" ",Object(o.jsx)("b",{children:"".concat(e[0],":")}),"  ","".concat(e[1])," "]},t)})):null,Object(o.jsx)("div",{ref:i})]})})}function r(e){var t=e.users;return Object(o.jsx)("ul",{children:Array.isArray(t)?t.map((function(e,t){return Object(o.jsxs)("li",{children:[" ",e," "]},t)})):null})}},105:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=105},142:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return p}));var c=n(15),o=n.n(c),i=n(38),r=n(39),s=n(2),a=n(0),u=n(20),l=n.n(u),d=n(3),j=n(104),b=n.n(j),f=n(102),h=n(30),O=n(57),m=n(5),g=n(100),v=n(1);var x=l()(window.location.origin,{secure:!0});function p(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)(!1),l=Object(s.a)(u,2),j=l[0],p=l[1],A=Object(a.useState)([]),w=Object(s.a)(A,2),k=w[0],y=w[1],S=Object(a.useState)(""),C=Object(s.a)(S,2),N=C[0],R=C[1],z=Object(a.useState)(""),E=Object(s.a)(z,2),D=E[0],L=E[1],M=Object(a.useState)(0),U=Object(s.a)(M,2),T=U[0],F=U[1],I=Object(a.useState)([]),J=Object(s.a)(I,2),P=J[0],_=J[1],K=Object(a.useRef)(null),V=Object(m.c)(O.pop),X=Object(s.a)(V,2),q=X[0],B=X[1],G=Object(a.useState)(""),H=Object(s.a)(G,2),Q=H[0],W=H[1],Y=Object(a.useRef)(null),Z=Object(a.useRef)(null),$=window.location.href;$=$.replace("https://itinit.pl/room/","");var ee=new b.a({iceServers:[{urls:"stun.ipfire.org:3478"},{urls:"turn:numb.viagenie.ca",username:"zyziolez@gmail.com",credential:"Adminio@123"}]}),te=P.slice(0),ne=Object(h.b)(te,Q);Object(a.useEffect)((function(){return x.emit("join-user",$,localStorage.getItem("nick")),ee.on("open",(function(e){x.emit("rooms-ids",$,e),W(e)})),ee.on("connection",(function(e){e.on("data",(function(e){console.log(e)})),e.on("open",(function(){e.send("hello")}))})),ee.on("call",(function(e){console.log("hejka dzwonionko"),navigator.mediaDevices.getUserMedia({video:!0,audio:!0},(function(t){e.answer(t),e.on("stream",(function(e){Z.current.srcObject=e}))}),(function(e){console.error("Failed to get local stream",e)}))})),x.on("chat",(function(e,t){null!=t?c((function(n){return[].concat(Object(r.a)(n),[[e,t]])})):console.log("wtf")})),x.on("admin",(function(e,t){"kick"==e?(B(!0),setTimeout((function(){B(!1),p(!0),window.location.reload()}),2e3)):"users"==e?(y(t[0]),F(t[1])):"max-reached"==e?(alert("Max number of guests reached!"),p(!0),window.location.reload()):"r-name"===e?R(t):"disc"===e?window.location.reload():"ids"===e&&_(t)})),function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){Y.current.srcObject=e}))}catch(t){console.log("no i tu sie zesralo")}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){c([]),y([]),window.location.reload()}}),[]);var ce=function(){""!=D&&(x.emit("chat",D,localStorage.getItem("nick")),L(""),K.current.focus())};return Object(v.jsxs)("div",{className:"room",children:[Object(v.jsx)(g.a,{open:q,setOpen:B,text:"Could not find room with id: ".concat($)}),Object(v.jsxs)("button",{onClick:function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0},(function(e){console.log(e),ee.call(ne[0],e).on("stream",(function(e){console.log("dzwonionko"),Z.current.srcObject=e}))}),(function(e){console.error("Failed to get local stream",e)}))},children:[" ",Object(v.jsx)("h1",{children:"CALL"})," "]}),Object(v.jsx)("video",{width:"340px",height:"180px",muted:!0,ref:Z}),Object(v.jsxs)("div",{className:"left",children:[Object(v.jsx)("h1",{children:"Chat:"}),Object(v.jsx)(f.a,{chat:n}),Object(v.jsx)("input",{type:"text",ref:K,maxLength:"150",value:D,onKeyPress:function(e){"Enter"===e.key&&ce()},onChange:function(e){return L(e.target.value)}}),Object(v.jsx)("button",{onClick:ce,className:"message-btn",children:"Send"})]}),console.log(P),console.log(Q),Object(v.jsxs)("div",{className:"right",children:[Object(v.jsxs)("h1",{children:["Rooms name: ",N]}),Object(v.jsxs)("h3",{children:[" ",k.length,"/",T," users"]}),Object(v.jsx)(f.b,{users:k}),Object(v.jsx)("button",{onClick:function(e){Object(h.c)($),x.disconnect(),p(!0)},children:"Report this Room"})]}),console.log(Z),Object(v.jsx)("button",{onClick:function(){var e=ee.connect(ne[0]);e.on("open",(function(){console.log("auba"),e.send("hi!")}))},children:" AAAAAAAAAAAAAAAAAAAAAAAAAAAAA "}),j?Object(v.jsx)(d.a,{to:"/"}):null]})}}}]);
//# sourceMappingURL=6.44b3b536.chunk.js.map